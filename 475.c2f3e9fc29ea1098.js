"use strict";(self.webpackChunkfront=self.webpackChunkfront||[]).push([[475],{5475:(O,u,a)=>{a.r(u),a.d(u,{AuthModule:()=>y});var c=a(9808),i=a(3075),l=a(8555),p=a(843);class m{constructor(e){this.email=e.email?e.email:null,this.password=e.password?e.password:null}}var d=a(3484),g=a(5860),o=a(5e3),f=a(7204);function h(t,e){1&t&&(o.TgZ(0,"div",8),o.TgZ(1,"small",24),o._uU(2," * Revise los datos, valores no v\xe1lidos. "),o.qZA(),o.qZA())}function v(t,e){1&t&&(o.TgZ(0,"div",8),o.TgZ(1,"small",24),o._uU(2," * Revise los datos, las credenciales son incorrectas. "),o.qZA(),o.qZA())}function b(t,e){1&t&&(o.TgZ(0,"div",25),o.TgZ(1,"span",26),o._uU(2,"Loading..."),o.qZA(),o.qZA())}const Z=[{path:"",children:[{path:"login",component:(()=>{class t{constructor(r,n,s,M){this.fb=r,this.as=n,this.storageService=s,this.router=M,this.errorLogin=!1,this.loading=!1,this.crearFormulario()}ngOnInit(){}get mailValid(){return this.forma.get("user").invalid&&this.forma.get("user").touched}get passValid(){return this.forma.get("password").invalid&&this.forma.get("password").touched}crearFormulario(){this.forma=this.fb.group({user:["",[i.kI.required,i.kI.email]],password:["",[i.kI.required,i.kI.minLength(3),i.kI.maxLength(15)]]})}send(){if(this.errorLogin=!1,console.log("send"),this.forma.invalid)return console.log("invalid"),this.forma.setValue({user:this.forma.get("user").value,password:""}),Object.values(this.forma.controls).forEach(n=>{n.markAsTouched()});let r;this.loading=!0,console.log("valid"),r=new m({email:this.forma.get("user").value,password:this.forma.get("password").value}),this.as.login(r).subscribe(n=>{if("OK"==n.status){let s;console.log(n.result),s=new p.z,s.token=n.result.authToken,s.user=new g.n5,s.user.nombre=n.result.nombre,s.user.apellidos=n.result.apellidos,s.user.email=n.result.email,s.user.telefon=n.result.telefon,s.user.cp=n.result.cp,s.user.is_admin=n.result.is_admin,s.user.rol=n.result.rol,console.log(s),this.storageService.setCurrentSession(s),this.storageService.setLastUpdate(),this.router.navigate(["/home"])}else this.errorLogin=!0;this.loading=!1},n=>{console.log(n),this.loading=!1})}}return t.\u0275fac=function(r){return new(r||t)(o.Y36(i.qu),o.Y36(d.$),o.Y36(f.V),o.Y36(l.F0))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-login"]],features:[o._Bn([d.$])],decls:29,vars:4,consts:[["id","main",1,"container-fluid","h-100","w-100"],[1,"d-flex","justify-content-center","h-100"],[1,"user_card"],[1,"d-flex","justify-content-center"],[1,"brand_logo_container"],["src","assets/img/launcher_icon_hd.png","alt","Logo",1,"brand_logo"],[1,"d-flex","justify-content-center","form_container"],["autocomplete","off",3,"formGroup"],[1,"input-group","mb-3"],[1,"input-group-append"],[1,"input-group-text"],[1,"fas","fa-user"],["type","text","name","","value","","formControlName","user","placeholder","Correo electr\xf3nico",1,"form-control","input_user","pl-2"],[1,"input-group","mb-2"],[1,"fas","fa-key"],["type","password","name","","value","","formControlName","password","placeholder","Contrase\xf1a",1,"form-control","input_pass","pl-2"],[1,"form-group"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","customControlInline",1,"custom-control-input"],["for","customControlInline",1,"custom-control-label"],["class","input-group mb-3",4,"ngIf"],[1,"d-flex","justify-content-center","mt-3","login_container"],["type","button","name","button",1,"btn","login_btn",3,"click"],["class","spinner-border  spinner-border-sm mr-2","role","status",4,"ngIf"],[2,"color","#dc3545"],["role","status",1,"spinner-border","spinner-border-sm","mr-2"],[1,"sr-only"]],template:function(r,n){1&r&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o.TgZ(4,"div",4),o._UZ(5,"img",5),o.qZA(),o.qZA(),o.TgZ(6,"div",6),o.TgZ(7,"form",7),o.TgZ(8,"div",8),o.TgZ(9,"div",9),o.TgZ(10,"span",10),o._UZ(11,"i",11),o.qZA(),o.qZA(),o._UZ(12,"input",12),o.qZA(),o.TgZ(13,"div",13),o.TgZ(14,"div",9),o.TgZ(15,"span",10),o._UZ(16,"i",14),o.qZA(),o.qZA(),o._UZ(17,"input",15),o.qZA(),o.TgZ(18,"div",16),o.TgZ(19,"div",17),o._UZ(20,"input",18),o.TgZ(21,"label",19),o._uU(22,"Recordar"),o.qZA(),o.qZA(),o.qZA(),o.YNc(23,h,3,0,"div",20),o.YNc(24,v,3,0,"div",20),o.TgZ(25,"div",21),o.TgZ(26,"button",22),o.NdJ("click",function(){return n.send()}),o.YNc(27,b,3,0,"div",23),o._uU(28," Entrar"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&r&&(o.xp6(7),o.Q6J("formGroup",n.forma),o.xp6(16),o.Q6J("ngIf",n.mailValid||n.passValid),o.xp6(1),o.Q6J("ngIf",n.errorLogin),o.xp6(3),o.Q6J("ngIf",n.loading))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,c.O5],styles:["#main[_ngcontent-%COMP%]{background-color:#2d8256}body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;height:100%;background:#2d8256!important}.user_card[_ngcontent-%COMP%]{height:400px;width:350px;margin-top:auto;margin-bottom:auto;background:#fff;position:relative;display:flex;justify-content:center;flex-direction:column;padding:10px;box-shadow:0 4px 8px #0003,0 6px 20px #00000030;-webkit-box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19);-moz-box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19);border-radius:5px}.brand_logo_container[_ngcontent-%COMP%]{position:absolute;height:170px;width:170px;top:-75px;border-radius:50%;background:#2d8256;padding:10px;text-align:center}.brand_logo[_ngcontent-%COMP%]{height:150px;width:150px;border-radius:50%;border:2px solid white}.form_container[_ngcontent-%COMP%]{margin-top:100px}.login_btn[_ngcontent-%COMP%]{width:100%;background:#2d8256!important;color:#fff!important}.login_btn[_ngcontent-%COMP%]:focus{box-shadow:none!important;outline:0px!important}.login_container[_ngcontent-%COMP%]{padding:0 2rem}.input-group-text[_ngcontent-%COMP%]{background:#2d8256!important;color:#fff!important;border:0!important;border-radius:.25rem 0 0 .25rem!important}.input_user[_ngcontent-%COMP%], .input_pass[_ngcontent-%COMP%]:focus{box-shadow:none!important;outline:0px!important}.custom-checkbox[_ngcontent-%COMP%]   .custom-control-input[_ngcontent-%COMP%]:checked ~ .custom-control-label[_ngcontent-%COMP%]:before{background-color:#2d8256!important}"]}),t})()},{path:"remember-pass",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-remember-pass"]],decls:2,vars:0,template:function(r,n){1&r&&(o.TgZ(0,"p"),o._uU(1,"remember-pass works!"),o.qZA())},styles:[""]}),t})()},{path:"**",redirectTo:"/auth/login"}]}];let x=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[l.Bz.forChild(Z)],l.Bz]}),t})();var C=a(4371),A=a(5874),T=a(5192);let y=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[c.ez,x,i.u5,i.UX,T.CH,A.IJ,C.SJ]]}),t})()}}]);